<div>
  <div>
    <%= render partial: "layouts/header" %>
    <%= render partial: "layouts/sidebar" %>
  </div>
  <div class="pt-[72px] pl-[184px] pb-[88px]">
    <div class="px-14">
      <h1 class="mt-10 text-2xl font-bold">スタッフ管理</h1>
      <div class="flex justify-between items-center">
        <div class="">スタッフのシフトの入れない時間帯を選択してください</div>
        <%= link_to "修正する", edit_members_schedules_user_event_members_schedules_path(current_user.id, @event.id), class: "block text-center ml-auto mb-4 py-1 w-[104px] h-8 text-white font-bold bg-[#818181] rounded-md" %>
      </div>
      <div class="pb-8">
        <%= form_with model: @members_schedule, url: user_event_members_schedules_path(current_user.id, @event.id), method: :post, data: { turbo: false } do |f| %>
          <div class="w-full h-[480px] overflow-scroll border-2">
            <table class="border-2">
              <tr>
                <th width="120px" height="32px" class="border-r-2 border-b-2 min-w-[120px]"></th>
                <% @schedules.each do |schedule| %>
                  <th width="120px" height="32px" class="border-r-2 border-b-2 leading-none min-w-[72px] w-[72px]">
                    <%= schedule.time_zone %>
                  </th>
                <% end %>
              </tr>
              <% @members.each do |member| %>
                <tr height="32px" width="120px" align="center" class="text-base font-bold border-b-2">
                  <td class="border-r-2 text-blue-500 hover:underline">
                    <%= link_to member.name, edit_user_event_member_path(current_user.id, @event.id, member.id) %>
                  </td>
                  <% @schedules.each do |schedule| %>
                    <% if MembersSchedule.exists?(schedule_id: schedule.id, member_id: member.id) %>
                      <td class="border-r-2 bg-main-blue">
                        <div class="text-white font-bold">必要</div>
                      </td>
                    <% else %>
                      <td class="border-r-2 pb-1">
                        <%= f.check_box :schedule_ids, { multiple: true, include_hidden: false }, [member.id, schedule.id] %>
                      </td>
                    <% end %>
                  <% end %>
                </tr>
              <% end %>
            </table>
          </div>
          <div class="pt-20">
            <%= f.submit "送信", class: "block mb-10 mx-auto text-white font-bold bg-blue-600 px-8 py-3 rounded hover:bg-blue-500 ease-in duration-200" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
